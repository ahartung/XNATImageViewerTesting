<!doctype html>
 
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Slider - Slider scrollbar</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <style>
  </style>
</head>
<body> 

</body>
<script src="./scripts/utils.js"></script>
<script src="./scripts/imageScans.js"></script>
<script src="./scripts/cSlider.js"></script>
<script src="./scripts/modSlider.js"></script>
<script src="./scripts/sliderSet.js"></script>
<script src="./scripts/frameViewer.js"></script>
<script src="./scripts/imageManip.js"></script>
<script src="./scripts/scanThumbnail.js"></script>
<script src="./scripts/dropZone.js"></script>
<script>


window.onload = function(){
	
	frameSlider = new modSlider({
		id: "modSlider1", 
		value: Math.round(imageScans.length/2),
		max: imageScans.length-1,
		min: 1,
		constrainMargin : 0,
		borderWidth_slider : 1,
		borderWidth_handle : 1,
		top : 327,
		left : 10,
		height : 7,
		width : 297,
		height_handle : 5,
		width_handle : 25,
		borderRadius_slider : 3,
		borderRadius_handle : 4,
	
	});
	frameSlider.styleBind = function(label, value){
		this.args[label] = value;
		this.restyle();
	}
  
  
  var fv = new frameViewer();  
  
  
  
  fv.addOnloadCallback(function(){
  	frameSlider.addSlideFunction(function(_slider){
  		var subtractor = (_slider.args["sliderMin"] > 0) ? _slider.args["sliderMin"] : 0;
  		fv.drawFrame(_slider.currValue-subtractor, true); 
	  });
	  frameSlider.bindToMouseWheel(fv.canvas);
  });
  
  contrastSlider = new modSlider(mergeArgs(frameSlider.args,{id: "constrastSlider", top: 350, min:1, max: 50, value:1, step: 1, "sliderBGColor":"rgba(0, 180, 60, .9)" }));
  contrastSlider.addSlideFunction(function(_slider){  		
  		fv.imageAdjust("contrast", _slider.currValue);
  });
  
  brightnessSlider = new modSlider(mergeArgs(frameSlider.args,{id: "brightnessSlider", top: 375, min:0, max: 255, value:0, step: 1, "sliderBGColor":"rgba(180, 0, 60, .9)" }));
  brightnessSlider.addSlideFunction(function(_slider){
  		fv.imageAdjust("brightness", _slider.currValue);
  });  


  var _dropZone = new dropZone();
  
  var scrollBounds = document.createElement("div");
  scrollBounds.setAttribute("id", "scrollBounds");
  scrollBounds.style.position = "absolute";
  scrollBounds.style.top = "20px";
  scrollBounds.style.left = "500px";
  scrollBounds.style.height = "300px";
  scrollBounds.style.width = "140px";
  scrollBounds.style.border = "solid rgb(0,0,0)";
  scrollBounds.style.borderWidth = "1px";
  scrollBounds.style.overflow= "hidden";
  document.body.appendChild(scrollBounds);
  
  var scrollContent = document.createElement("div")
  scrollContent.setAttribute("id", "scrollContent");
  scrollContent.style.position = "relative";
  scrollContent.style.top= "0px";
  scrollBounds.appendChild(scrollContent);

  var scrollMarginY = 20;
  var scrollMarginX = 20;
  var thumbSpacing = scrollMarginY;
  var totalHeight = 0;
  
  for (var i=0; i<10; i++){
	  var h = i*_i(100) + thumbSpacing*i + scrollMarginY;  	
  	  var a = new scanThumbnail({
  	  	id: "scrollContent_" + i.toString(),
  	  	parent: scrollContent,
  	  	_css: {
  	  		top: h, 
  	  		left: scrollMarginX,
  	  	}
  	  });
	  a.addDropZone(_dropZone);
	  totalHeight += h;
  }

  //scrollContent.style.height = _px(totalHeight);
  scrollContent.style.backgroundColor= "rgba(10, 200, 2, .4)";
  
   /*
	var sliderSetArgs = {
		id: frameSlider.args.id + "_styleSliderSet",
		_css:{
				"top": 20,
				"left": 500,		
			  }
	}

	var ss = new sliderSet(sliderSetArgs, [		
		{id:"constrainMargin",	 	min: 0, max: 40, step: 1, value: 0},
		{id:"borderWidth_slider", 	min: 0, max: 40, step: 1, value: 1},
		{id:"borderWidth_handle", 	min: 0, max: 40, step: 1, value: 1},
		{id:"top", 					min: 0, max: 1000, step: 1, value: 327},
		{id:"left", 				min: 0, max: 1000, step: 1, value: 10},
		{id:"height", 				min: 0, max: 600, step: 1, value: 10},
		{id:"width", 				min: 0, max: 600, step: 1, value: 300},
		{id:"height_handle",		min: 0, max: 600, step: 1, value: 20},
		{id:"width_handle", 		min: 0, max: 600, step: 1, value: 20},
		{id:"borderRadius_slider", 	min: 0, max: 40, value:0},
		{id:"borderRadius_handle", 	min: 0, max: 40, value:0},
	]);    
	*/
	
	contentSlider = new modSlider({
		id: "contentSlider", 
		constrainMargin: 2, 
		top: 20, left: 450, 
		orientation: "vertical",  
		value:100, step: 1, 
		height: 300, width: 12, 
		width_handle: 8, 
		borderRadius_slider: 4,
		borderRadius_handle: 4,
		"sliderBGColor":"rgba(0, 0, 200, .3)" 
	});
  
  /* Slider Set
  for (var j=0;j<ss.sliders.length;j++){
  	var sl = ss.sliders[j];
  	sl.addSlideFunction(function(_slider){
	  	contentSlider.args[_slider.args["corollary"]] = _slider.currValue;
	  	contentSlider.restyle();
	}, contentSlider.args[sl.args["corollary"]]);
  }
  */
  
//  console.log("bounds height: " + $(scrollBounds).height() + " content height: " + $(scrollContent).height())

  contentSlider.addSlideFunction(function(_slider){
  		$(scrollContent).css({
  			top: -_remap1D(_slider.currValue, [_slider.args.min, _slider.args.max], [0, $(scrollContent).height() - $(scrollBounds).height() - scrollMarginY])
  		});
  });  
  contentSlider.bindToMouseWheel(scrollBounds);
  
  


}



</script>
</html>